<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048 Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
            text-align: center;
        }

        header {
            padding: 20px;
            font-size: 2em;
            font-weight: bold;
        }

        .instructions {
            margin: 10px 0;
            font-size: 1em;
        }

        .difficulty {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .difficulty button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            background: #ffdd00;
            color: #000;
            font-weight: bold;
        }

        .difficulty button:hover {
            transform: scale(1.1);
        }

        #gameArea {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin: 20px;
        }

        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .controls button {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .controls button:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        footer {
            padding: 10px;
            font-size: 0.9em;
        }

        a {
            color: #ffdd00;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        @media(max-width:600px) {

            .difficulty,
            .controls {
                flex-direction: column;
                gap: 10px;
            }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 80px);
            grid-gap: 10px;
        }

        .tile {
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            font-weight: bold;
            border-radius: 10px;
            color: #fff;
            transition: 0.2s;
        }

        .tile-0 {
            background: rgba(255, 255, 255, 0.1);
        }

        .tile-2 {
            background: #eee4da;
            color: #776e65;
        }

        .tile-4 {
            background: #ede0c8;
            color: #776e65;
        }

        .tile-8 {
            background: #f2b179;
        }

        .tile-16 {
            background: #f59563;
        }

        .tile-32 {
            background: #f67c5f;
        }

        .tile-64 {
            background: #f65e3b;
        }

        .tile-128 {
            background: #edcf72;
            color: #f9f6f2;
        }

        .tile-256 {
            background: #edcc61;
            color: #f9f6f2;
        }

        .tile-512 {
            background: #edc850;
            color: #f9f6f2;
        }

        .tile-1024 {
            background: #edc53f;
            color: #f9f6f2;
        }

        .tile-2048 {
            background: #edc22e;
            color: #f9f6f2;
        }

        .arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
            gap: 5px;
        }

        .arrow-row {
            display: flex;
            gap: 5px;
        }

        .arrow-btn {
            padding: 15px 20px;
            font-size: 1.2em;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: 0.2s;
        }

        .arrow-btn:hover {
            background: rgba(255, 255, 255, 0.4);
        }
    </style>
</head>

<body>

    <header>2048 Game</header>

    <div class="instructions">
        How to play: Use arrow keys OR click arrows below to move tiles. Merge same numbers to reach 2048!
    </div>

    <div class="difficulty" id="difficultyDiv">
        <button onclick="startGame('easy')">Easy</button>
        <button onclick="startGame('medium')">Medium</button>
        <button onclick="startGame('hard')">Hard</button>
    </div>

    <div id="gameArea"></div>

    <div class="arrow-container" id="arrows" style="display:none;">
        <div class="arrow-row">
            <button class="arrow-btn" onclick="move('ArrowUp')">↑</button>
        </div>
        <div class="arrow-row">
            <button class="arrow-btn" onclick="move('ArrowLeft')">←</button>
            <button class="arrow-btn" onclick="move('ArrowDown')">↓</button>
            <button class="arrow-btn" onclick="move('ArrowRight')">→</button>
        </div>
    </div>

    <div class="controls" id="gameControls" style="display:none;">
        <button onclick="restartGame()">Restart Game</button>
        <button onclick="backToHome()">Back to Home</button>
    </div>

    <footer>
        Follow me on Instagram: <a href="https://www.instagram.com/this_is_naitik_gupta"
            target="_blank">@this_is_naitik_gupta</a>
    </footer>

    <script>
        let grid = [];
        let size = 4;
        let gameStarted = false;
        let difficulty = 'easy';

        function startGame(level) {
            difficulty = level;
            gameStarted = true;
            document.getElementById('difficultyDiv').style.display = 'none';
            document.getElementById('gameControls').style.display = 'flex';
            document.getElementById('arrows').style.display = 'flex';
            initGrid();
            renderGrid();
            document.addEventListener('keydown', handleKey);
        }

        function initGrid() {
            grid = Array(size).fill().map(() => Array(size).fill(0));
            addRandomTile();
            addRandomTile();
        }

        function renderGrid() {
            const area = document.getElementById('gameArea');
            area.innerHTML = '';
            const gridDiv = document.createElement('div');
            gridDiv.className = 'grid';
            grid.forEach(row => {
                row.forEach(val => {
                    const tile = document.createElement('div');
                    tile.className = 'tile tile-' + val;
                    tile.textContent = val === 0 ? '' : val;
                    gridDiv.appendChild(tile);
                });
            });
            area.appendChild(gridDiv);
        }

        function addRandomTile() {
            let empty = [];
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    if (grid[i][j] === 0) empty.push([i, j]);
                }
            }
            if (empty.length === 0) return;
            let [i, j] = empty[Math.floor(Math.random() * empty.length)];
            let chance = Math.random();
            if (difficulty === 'easy') grid[i][j] = (chance < 0.9 ? 2 : 4);
            if (difficulty === 'medium') grid[i][j] = (chance < 0.7 ? 2 : 4);
            if (difficulty === 'hard') grid[i][j] = (chance < 0.4 ? 2 : 4);
        }

        function handleKey(e) {
            if (e.key.includes('Arrow')) { move(e.key); }
        }

        function move(dir) {
            let moved = false;
            let rotated = false;
            if (dir === 'ArrowUp') { grid = rotateGrid(grid, true); rotated = true; }
            if (dir === 'ArrowDown') { grid = rotateGrid(grid, false); rotated = true; }
            if (dir === 'ArrowLeft') { moved = slideLeft(); }
            if (dir === 'ArrowRight') { grid = mirror(grid); moved = slideLeft(); grid = mirror(grid); }
            if (rotated) { moved = slideLeft(); grid = rotateGrid(grid, false); }
            if (moved) { addRandomTile(); renderGrid(); checkGameOver(); }
        }

        function slideLeft() {
            let moved = false;
            for (let i = 0; i < size; i++) {
                let row = grid[i].filter(v => v !== 0);
                for (let j = 0; j < row.length - 1; j++) {
                    if (row[j] === row[j + 1]) { row[j] *= 2; row[j + 1] = 0; moved = true; }
                }
                row = row.filter(v => v !== 0);
                while (row.length < size) row.push(0);
                if (grid[i].toString() !== row.toString()) moved = true;
                grid[i] = row;
            }
            return moved;
        }

        function rotateGrid(g, reverse = false) {
            let newGrid = Array(size).fill().map(() => Array(size).fill(0));
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    newGrid[i][j] = reverse ? g[j][i] : g[size - j - 1][i];
                }
            }
            return newGrid;
        }

        function mirror(g) { return g.map(row => row.reverse()); }

        function checkGameOver() {
            let over = true;
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    if (grid[i][j] === 0) over = false;
                    if (i < size - 1 && grid[i][j] === grid[i + 1][j]) over = false;
                    if (j < size - 1 && grid[i][j] === grid[i][j + 1]) over = false;
                }
            }
            if (over) setTimeout(() => alert("Game Over!"), 100);
        }

        function restartGame() {
            initGrid();
            renderGrid();
        }

        function backToHome() { window.location.href = "../index.html"; }
    </script>

</body>

</html>